<Page
    x:Class="CyreneGUI.Views.Work.WorkPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:f="using:CyreneGUI.Components.FileItem"
    xmlns:cu="using:CyreneCore.Utils"
    xmlns:gu="using:CyreneGUI.Utils">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Grid Padding="0,30,30,30">
            <Grid Padding="16,12">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Grid Padding="20,0,18,0">
                    <StackPanel Orientation="Horizontal"
                                Spacing="8"
                                HorizontalAlignment="Left">
                        <Button Content="{gu:Tr K=ChooseFile}"
                                Click="{x:Bind BrowseInputFiles_Click}"
                                Height="40"
                                Width="130"/>
                        <Button Content="{gu:Tr K=ChooseFolder}"
                                Click="{x:Bind BrowseInputFolder_Click}"
                                Height="40"
                                Width="130"/>
                        <Button Content="{gu:Tr K=ClearInputs}"
                                Click="{x:Bind ClearInputFiles_Click}"
                                Height="40"
                                Width="130"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal"
                                Spacing="8"
                                HorizontalAlignment="Right">
                        <Button Content="{gu:Tr K=OpenOutput}"
                                Click="{x:Bind OpenOutputFolder_Click}"
                                Height="40"
                                Width="130"
                                Style="{StaticResource AccentButtonStyle}"/>
                    </StackPanel>
                </Grid>

                <ListView Grid.Row="1"
                          ItemsSource="{x:Bind ViewModel.FileItems, Mode=OneWay}"
                          SelectionMode="None"
                          Margin="0,12,0,0">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="f:FileItemViewModel">
                            <f:FileItemCard />
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Grid>
        </Grid>

        <Grid Grid.Row="1" 
              Padding="30,16,30,16"
              BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
              BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Spacing="12">
                <Button Content="{gu:Tr K=CancelProcess}"
                        Height="40"
                        Width="130"
                        Click="{x:Bind Cancel_Click}"
                        Visibility="{x:Bind gu:AppUtil.IsVisible(ViewModel.State, cu:ProcessState.Processing), Mode=OneWay}"/>

                <Button Style="{StaticResource AccentButtonStyle}"
                        Height="40"
                        Width="130"
                        Click="{x:Bind Process_Click}"
                        IsEnabled="{x:Bind gu:AppUtil.IsState(ViewModel.State, cu:ProcessState.None), Mode=OneWay}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <ProgressRing Width="16"
                                      Height="16"
                                      IsActive="True"
                                      Foreground="White"
                                      Visibility="{x:Bind gu:AppUtil.IsVisible(ViewModel.State, cu:ProcessState.Processing), Mode=OneWay}"/>
                        <TextBlock Text="{x:Bind ViewModel.ProcessText, Mode=OneWay}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Grid>
    </Grid>
</Page>